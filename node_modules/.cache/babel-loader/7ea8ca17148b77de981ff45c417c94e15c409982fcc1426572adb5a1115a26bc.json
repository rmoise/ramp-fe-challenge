{"ast":null,"code":"import { getEmployees, getTransactionsPaginated, getTransactionsByEmployee, setTransactionApproval } from \"./requests\";\nconst timeout = getTimeout();\nconst mockTimeout = 1 * timeout;\nexport function fakeFetch(endpoint, params) {\n  return new Promise((resolve, reject) => {\n    mockApiLogger({\n      message: \"Loading request\",\n      data: {\n        endpoint,\n        params\n      },\n      type: \"info\"\n    });\n    let result;\n    try {\n      switch (endpoint) {\n        case \"employees\":\n          result = getEmployees();\n          break;\n        case \"paginatedTransactions\":\n          result = getTransactionsPaginated(params);\n          break;\n        case \"transactionsByEmployee\":\n          result = getTransactionsByEmployee(params);\n          break;\n        case \"setTransactionApproval\":\n          result = setTransactionApproval(params);\n          break;\n        default:\n          return reject(new Error(\"Invalid endpoint\"));\n      }\n\n      // Log the result with a delay for simulation\n      setTimeout(() => {\n        mockApiLogger({\n          data: {\n            endpoint,\n            params,\n            result\n          }\n        });\n        resolve(result);\n      }, getMockTimeoutForEndpoint(endpoint));\n    } catch (error) {\n      if (error instanceof Error) {\n        mockApiLogger({\n          message: error.message,\n          data: {\n            endpoint,\n            params\n          },\n          type: \"error\"\n        });\n        reject(error.message);\n      }\n    }\n  });\n}\nfunction getMockTimeoutForEndpoint(endpoint) {\n  switch (endpoint) {\n    case \"employees\":\n      return mockTimeout;\n    case \"paginatedTransactions\":\n      return mockTimeout * 2.5;\n    case \"transactionsByEmployee\":\n      return mockTimeout * 1.5;\n    case \"setTransactionApproval\":\n      return mockTimeout * 1;\n    default:\n      return mockTimeout;\n    // Fallback for safety\n  }\n}\nfunction mockApiLogger({\n  data,\n  message = \"Success request\",\n  type = \"success\"\n}) {\n  if (process.env.REACT_APP_MOCK_REQUEST_LOGS_ENABLED === \"false\") {\n    return;\n  }\n  console.log(`%c--Fake Request Debugger-- %c${message}`, \"color: #717171\", getTitleColor());\n  console.log(data);\n  function getTitleColor() {\n    if (type === \"error\") {\n      return \"color: #d93e3e;\";\n    }\n    if (type === \"info\") {\n      return \"color: #1670d2;\";\n    }\n    return \"color: #548a54;\";\n  }\n}\nfunction getTimeout() {\n  var _ref, _URL$searchParams$get;\n  const timeout = parseInt((_ref = (_URL$searchParams$get = new URL(document.location).searchParams.get(\"timeout\")) !== null && _URL$searchParams$get !== void 0 ? _URL$searchParams$get : process.env.REACT_APP_TIMEOUT_MULTIPLIER) !== null && _ref !== void 0 ? _ref : \"1000\");\n  if (Number.isNaN(timeout)) {\n    return 1000;\n  }\n  return timeout;\n}","map":{"version":3,"names":["getEmployees","getTransactionsPaginated","getTransactionsByEmployee","setTransactionApproval","timeout","getTimeout","mockTimeout","fakeFetch","endpoint","params","Promise","resolve","reject","mockApiLogger","message","data","type","result","Error","setTimeout","getMockTimeoutForEndpoint","error","process","env","REACT_APP_MOCK_REQUEST_LOGS_ENABLED","console","log","getTitleColor","_ref","_URL$searchParams$get","parseInt","URL","document","location","searchParams","get","REACT_APP_TIMEOUT_MULTIPLIER","Number","isNaN"],"sources":["/Users/roderickmoise/Desktop/Documents/Downloads/ramp-fe-challenge/src/utils/fetch.ts"],"sourcesContent":["import {\n  getEmployees,\n  getTransactionsPaginated,\n  getTransactionsByEmployee,\n  setTransactionApproval,\n} from \"./requests\"\nimport { PaginatedRequestParams, RequestByEmployeeParams, SetTransactionApprovalParams } from \"./types\"\n\nconst timeout = getTimeout()\nconst mockTimeout = 1 * timeout\n\nexport function fakeFetch<TData, TParams extends object = object>(\n  endpoint: RegisteredEndpoints,\n  params?: TParams\n): Promise<TData> {\n  return new Promise((resolve, reject) => {\n    mockApiLogger({\n      message: \"Loading request\",\n      data: { endpoint, params },\n      type: \"info\",\n    })\n\n    let result: TData\n\n    try {\n      switch (endpoint) {\n        case \"employees\":\n          result = getEmployees() as unknown as TData\n          break\n\n        case \"paginatedTransactions\":\n          result = getTransactionsPaginated(params as PaginatedRequestParams) as unknown as TData\n          break\n\n        case \"transactionsByEmployee\":\n          result = getTransactionsByEmployee(params as RequestByEmployeeParams) as unknown as TData\n          break\n\n        case \"setTransactionApproval\":\n          result = setTransactionApproval(params as SetTransactionApprovalParams) as unknown as TData\n          break\n\n        default:\n          return reject(new Error(\"Invalid endpoint\"))\n      }\n\n      // Log the result with a delay for simulation\n      setTimeout(() => {\n        mockApiLogger({ data: { endpoint, params, result } })\n        resolve(result)\n      }, getMockTimeoutForEndpoint(endpoint))\n    } catch (error) {\n      if (error instanceof Error) {\n        mockApiLogger({\n          message: error.message,\n          data: { endpoint, params },\n          type: \"error\",\n        })\n        reject(error.message)\n      }\n    }\n  })\n}\n\nfunction getMockTimeoutForEndpoint(endpoint: RegisteredEndpoints): number {\n  switch (endpoint) {\n    case \"employees\":\n      return mockTimeout\n    case \"paginatedTransactions\":\n      return mockTimeout * 2.5\n    case \"transactionsByEmployee\":\n      return mockTimeout * 1.5\n    case \"setTransactionApproval\":\n      return mockTimeout * 1\n    default:\n      return mockTimeout // Fallback for safety\n  }\n}\n\nfunction mockApiLogger({\n  data,\n  message = \"Success request\",\n  type = \"success\",\n}: {\n  message?: string\n  data: object\n  type?: \"success\" | \"error\" | \"info\"\n}) {\n  if (process.env.REACT_APP_MOCK_REQUEST_LOGS_ENABLED === \"false\") {\n    return\n  }\n\n  console.log(`%c--Fake Request Debugger-- %c${message}`, \"color: #717171\", getTitleColor())\n  console.log(data)\n\n  function getTitleColor() {\n    if (type === \"error\") {\n      return \"color: #d93e3e;\"\n    }\n    if (type === \"info\") {\n      return \"color: #1670d2;\"\n    }\n    return \"color: #548a54;\"\n  }\n}\n\nfunction getTimeout() {\n  const timeout = parseInt(\n    new URL(document.location as unknown as URL).searchParams.get(\"timeout\") ??\n      process.env.REACT_APP_TIMEOUT_MULTIPLIER ??\n      \"1000\"\n  )\n\n  if (Number.isNaN(timeout)) {\n    return 1000\n  }\n\n  return timeout\n}\n\nexport type RegisteredEndpoints =\n  | \"employees\"\n  | \"paginatedTransactions\"\n  | \"transactionsByEmployee\"\n  | \"setTransactionApproval\"\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}